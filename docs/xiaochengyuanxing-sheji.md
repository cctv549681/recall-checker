# 小程序原型设计文档

> **项目**：Recall Checker - 产品召回查询助手
> **版本**：v1.0
> **设计目标**：简单、高效、用户友好

---

## 📱 页面结构

### 页面列表

| 序号 | 页面名称 | 功能 | 优先级 |
|------|---------|------|--------|
| 1 | 首页 | 主要入口，OCR和批号输入 | ⭐⭐⭐ |
| 2 | OCR识别 | 拍照/相册，识别批次号 | ⭐⭐⭐ |
| 3 | 查询结果 | 展示召回状态和产品详情 | ⭐⭐⭐ |
| 4 | 历史记录 | 查询历史列表 | ⭐⭐ |

---

## 🎨 页面详细设计

### 1. 首页（index）

#### 布局结构
```
┌─────────────────────────────┐
│  顶部：品牌logo + 标题    │
│                            │
│  主操作区：                │
│  ┌───────────────────┐    │
│  │   📸 OCR扫描    │    │
│  │   拍照/上传照片  │    │
│  └───────────────────┘    │
│                            │
│  或                        │
│                            │
│  ┌───────────────────┐    │
│  │   🔍 手动输入   │    │
│  │   输入批次号      │    │
│  └───────────────────┘    │
│                            │
│  底部：查询历史           │
│  📋 最近查询 (3条)       │
└─────────────────────────────┘
```

#### UI 元素

**1. 顶部**
- 品牌 Logo（左上）
- 页面标题："产品召回查询"（居中或右侧）
- 可能的顶部提示："快速查询产品召回状态"

**2. 主操作区（大卡片）**

**OCR 扫描按钮**：
- 图标：📸 相机图标（64x64）
- 主文案："拍照识别批次号"
- 副文案："支持自动识别批次号"
- 背景：雀巢绿色/品牌主题色
- 圆角：16px
- 阴影：轻微阴影
- 点击效果：按下态

**手动输入按钮**（次要）
- 图标：🔍 搜索图标
- 文案："或手动输入批次号"
- 背景：浅灰色/白色
- 边框：1px 实线
- 点击效果：跳转到输入页面

**3. 底部区域**

**历史记录卡片**：
- 标题："📋 最近查询"
- 最多显示 3 条
- 每条格式：
  ```
  [批次号] [状态图标]
  [产品名称]
  [查询时间]
  ```
- 点击任意条目：跳转到历史记录页面

#### 交互流程
```
用户打开首页
    ↓
点击 "拍照识别" 按钮
    ↓
跳转到 OCR 识别页面
    ↓
点击 "手动输入" 按钮
    ↓
跳转到批号输入页面
    ↓
点击 "最近查询" 条目
    ↓
跳转到历史记录页面
```

---

### 2. OCR 识别页面（camera）

#### 布局结构
```
┌─────────────────────────────┐
│  顶部：返回 + "拍照识别"  │
│                            │
│  相机预览区：              │
│  ┌───────────────────┐    │
│  │                   │    │
│  │   📷 相机预览   │    │
│  │                   │    │
│  └───────────────────┘    │
│                            │
│  底部操作栏：              │
│  ┌─────┐ ┌───────┐    │
│  │相册  │ │ 拍照  │    │
│  └─────┘ └───────┘    │
│                            │
│  提示：                   │
│  "请对准罐子底部的批次号" │
└─────────────────────────────┘
```

#### UI 元素

**1. 顶部**
- 返回按钮：← （左上）
- 页面标题："拍照识别"

**2. 相机预览区**
- 全屏相机视图
- 扫描框：中心矩形框（带边框和角标）
- 扫描框提示："对准批次号"
- 引导线：水平参考线（辅助对齐）

**3. 底部操作栏**

**相册按钮**：
- 图标：🖼️
- 文案："相册"
- 背景：白色/半透明
- 位置：左侧

**拍照按钮**：
- 图标：📷（大圆）
- 文案："拍照"
- 背景：雀巢绿色
- 大小：80x80
- 位置：居中，底部

**4. 提示文字**
- 内容："请对准罐子底部的批次号"
- 位置：扫描框上方
- 背景：半透明黑色遮罩
- 文字颜色：白色

#### 交互流程
```
用户打开 OCR 页面
    ↓
相册预览（或相机权限请求）
    ↓
点击 "相册" 按钮
    ↓
打开系统相册
    ↓
选择照片
    ↓
显示裁剪界面
    ↓
确认裁剪区域
    ↓
调用百度 OCR API
    ↓
识别成功？
    ├─ 是 → 显示识别结果
    │       ↓
    │   显示确认弹窗
    │       ↓
    │   确认？→ 跳转到查询结果页面
    │   取消？→ 返回 OCR 页面
    └─ 否 → 显示错误提示
            ↓
            重试 / 返回首页
```

**错误提示**：
- 识别失败："未识别到批次号，请重新拍照"
- 网络："网络连接失败，请检查网络"
- 权限："需要相机/相册权限"

---

### 3. 查询结果页面（result）

#### 布局结构
```
┌─────────────────────────────┐
│  顶部：返回 + "查询结果"  │
│                            │
│  召回状态卡片（大）        │
│  ┌───────────────────┐    │
│  │  🔴 召回中       │    │
│  │                   │    │
│  │  风险等级：高      │    │
│  └───────────────────┘    │
│                            │
│  产品详情：                │
│  ┌───────────────────┐    │
│  │ 品牌：雀巢       │    │
│  │ 产品：SMA...     │    │
│  │ 批次：xxx       │    │
│  │ 有效期：xxx       │    │
│  │ 地区：UK         │    │
│  └───────────────────┘    │
│                            │
│  召回原因：                │
│  "Cereulide毒素，"        │
│  "可能引起食源性疾病"      │
│                            │
│  底部：                   │
│  🔗 官方来源链接          │
│  📋 保存到历史记录        │
│  🔄 重新查询              │
└─────────────────────────────┘
```

#### UI 元素

**1. 顶部**
- 返回按钮：←

**2. 召回状态卡片**

**召回中**：
- 图标：⚠️ / 🔴
- 标题："召回中"
- 背景色：橙红色 (#FF5252)
- 文字颜色：白色
- 大小：全宽卡片

**已结束**：
- 图标：✅ / 🟢
- 标题："已结束召回"
- 背景色：绿色 (#52C41A)
- 文字颜色：白色

**未召回**：
- 图标：✅ / 🟢
- 标题："未在召回名单"
- 背景色：绿色 (#52C41A)
- 文字颜色：白色

**未找到**：
- 图标：❓ / 🟡
- 标题："未找到相关信息"
- 背景色：灰色 (#999999)
- 文字颜色：白色

**风险等级标签**（仅在召回中显示）：
- 高：🔴 红色背景
- 中：🟠 橙色背景
- 低：🟢 绿色背景

**3. 产品详情列表**

**详情字段**：
- 品牌：雀巢 Nestlé
- 产品：SMA Advanced First Infant Milk
- 批次：51450742F1, 52319722BA
- 包装规格：800g
- 有效期：2027年5月
- 受影响地区：UK

**格式**：
- 键：灰色小字（14px）
- 值：黑色常规字（16px）
- 布局：左右分列或上下排列

**4. 召回原因**
- 图标：⚠️
- 内容："Cereulide毒素，可能引起食源性疾病"
- 背景：浅红色背景（#FFF0F0）
- 圆角：8px
- 内边距：12px

**5. 底部操作**

**官方来源链接**：
- 图标：🔗
- 文案："官方召回公告"
- 点击：打开链接到 FSA/官网

**保存到历史记录**：
- 图标：📋
- 文案："保存记录"
- 点击：保存到本地存储

**重新查询**：
- 图标：🔄
- 文案："重新查询"
- 点击：返回首页

#### 交互流程
```
OCR 识别成功
    ↓
自动查询飞书表格
    ↓
跳转到查询结果页面
    ↓
显示召回状态
    ↓
显示产品详情
    ↓
用户可以：
    - 点击官方链接查看详情
    - 保存到历史记录
    - 重新查询
    - 返回首页
```

---

### 4. 历史记录页面（history）

#### 布局结构
```
┌─────────────────────────────┐
│  顶部：返回 + "查询历史"  │
│                            │
│  筛选栏：                  │
│  ┌─────┐ ┌───────┐    │
│  │全部  │ │ 召回中 │    │
│  └─────┘ └───────┘    │
│                            │
│  历史记录列表：            │
│  ┌───────────────────┐    │
│  │ 记录 1          │    │
│  │ [批次] [状态]     │    │
│  │ [产品] [时间]     │    │
│  ├───────────────────┤    │
│  │ 记录 2          │    │
│  │ [批次] [状态]     │    │
│  │ [产品] [时间]     │    │
│  └───────────────────┘    │
│                            │
│  底部：                   │
│  🗑️ 清空历史            │
└─────────────────────────────┘
```

#### UI 元素

**1. 顶部**
- 返回按钮：←
- 页面标题："查询历史"

**2. 筛选栏**

**筛选选项**（胶囊按钮）：
- 全部：选中状态
- 召回中：未选中
- 已结束：未选中
- 未召回：未选中

**点击交互**：
- 切换选中状态
- 筛选列表

**3. 历史记录列表**

**记录卡片**：
- 布局：水平分隔线或卡片
- 内容：
  - 批次号（粗体，16px）
  - 状态图标 + 文字（右对齐）
  - 产品名称（灰色，14px）
  - 查询时间（灰色，12px）

**状态颜色**：
- 召回中：橙红色 (#FF5252)
- 已结束：绿色 (#52C41A)
- 未召回：绿色 (#52C41A)
- 未找到：灰色 (#999999)

**点击交互**：
- 跳转到查询结果页面
- 显示该批次的详细结果

**空状态**：
- 图标：📭
- 文案："暂无查询记录"
- 操作："去查询"按钮

**4. 底部操作**

**清空历史**：
- 图标：🗑️
- 文案："清空历史"
- 位置：右下角
- 点击：确认弹窗

#### 交互流程
```
用户打开历史记录页面
    ↓
显示所有历史记录（默认筛选：全部）
    ↓
点击筛选按钮
    ↓
筛选列表（召回中/已结束/未召回）
    ↓
点击任意记录
    ↓
跳转到查询结果页面
    ↓
点击 "清空历史"
    ↓
确认弹窗
    ↓
清空本地存储
```

---

## 🎨 设计规范

### 颜色系统

**主色调**（雀巢主题）：
- 主色：#0078D7（雀巢蓝）
- 强调色：#00A651（雀巢绿）
- 警告色：#FF5252（红色）
- 成功色：#52C41A（绿色）
- 背景色：#F5F5F5（浅灰）

**状态颜色**：
- 召回中：#FF5252
- 已结束：#52C41A
- 未召回：#52C41A
- 未找到：#999999
- 高风险：#FF5252
- 中风险：#FFA500
- 低风险：#52C41A

### 字体系统

**字体大小**：
- 大标题：24px（粗体）
- 页面标题：20px（粗体）
- 卡片标题：18px（粗体）
- 正文：16px（常规）
- 辅助文字：14px（常规）
- 小字：12px（常规）

**字重**：
- 标题：bold（700）
- 正文：regular（400）

### 圆角系统

- 按钮：8px
- 卡片：12px
- 弹窗：16px

### 间距系统

- 页面边距：16px
- 卡片内边距：16px
- 元素间距：12px

---

## 📱 交互规范

### 页面转场

- 转场类型：滑动（Slide）
- 转场时长：300ms

### 按钮交互

**点击态**：
- 背景色加深 5%
- 缩放 95%

### 加载状态

**加载动画**：
- 类型：转圈圈（Spinner）
- 颜色：主色调
- 位置：页面中心

### 空状态

**空状态组件**：
- 图标：📭
- 文案："暂无数据"
- 操作："去查询"按钮

---

## 🎯 设计总结

### 核心原则

1. **简洁优先**
   - 每个页面只有一个主要操作
   - 减少视觉噪音

2. **用户友好**
   - 大按钮，易点击
   - 清晰的文字和图标
   - 实时的状态反馈

3. **流程顺畅**
   - 3 步完成查询：拍照 → 识别 → 结果
   - 最少的页面跳转

4. **错误处理**
   - 友好的错误提示
   - 清晰的重试路径

### 用户体验

**正常流程**：
1. 打开首页（1秒）
2. 点击 OCR 按钮（1秒）
3. 拍照/选择照片（2秒）
4. 等待识别（2-3秒）
5. 查看结果（即时）

**总时间**：~6-8 秒完成查询

---

## 📐 尺寸规范

### 页面尺寸
- iPhone SE: 375x667
- iPhone 12/13: 390x844
- iPhone 14/15 Pro: 393x852

### 组件尺寸
- 主按钮：320x56（全宽减去边距）
- 次按钮：160x48（半宽）
- 卡片：全宽（减去边距）
- 图标：64x64

---

**备注**：设计完成后，可以开始开发小程序框架。
