# Recall Checker - 完整任务清单

> 项目目标：3周内完成产品召回查询小程序1.0版本上线
> 更新时间：2026-01-29 19:17
> 当前进度：Day 1 部分完成

---

## 📋 任务状态说明
- `[ ]` 未完成
- `[x]` 已完成
- `[⏸️]` 进行中
- `[❌]` 失败/阻塞

---

# Week 1：基础设施 + 核心功能开发

## Day 1-2：项目搭建 + 飞书集成

### 项目初始化
- [x] 创建项目目录结构
- [x] 初始化Git仓库
- [x] 创建README.md
- [x] 搭建爬虫项目结构（Python）
- [x] 搭建小程序基础目录
- [x] 编写项目完整README（含架构说明）
- [ ] 创建.gitignore文件
- [ ] 提交初始代码到GitHub

### 飞书应用创建
- [x] 登录飞书开放平台创建自建应用
- [x] 获取App ID和App Secret
- [x] 配置应用权限（bitable:app等）
- [x] 获取obj_token
- [x] 创建"Recall Checker Data"表格
- [ ] 手动添加所有字段到飞书表格（需要权限）
- [ ] 测试数据写入权限

### 飞书多维表格创建
- [x] 创建召回批次表结构（recalled_batches）
- [x] 定义所有字段（14个字段）
- [x] 创建品牌配置表结构（brand_config）
- [x] 创建查询日志表结构（query_logs）
- [ ] 在飞书中手动创建表格字段（API权限不足）
- [ ] 手动导入雀巢召回数据

### 爬虫基础框架
- [x] 安装Python依赖（playwright, beautifulsoup4等）
- [x] 安装Chromium浏览器
- [x] 创建爬虫基础类（BaseScraper）
- [x] 创建配置文件（.env）
- [x] 创建工具类（日志、文件保存等）
- [x] 编写爬虫README文档

---

## Day 3-4：爬虫开发（雀巢 + Abbott）

### 雀巢爬虫
- [x] 创建NestleRecallScraper类
- [x] 实现FSA页面数据解析
- [x] 测试批次号提取准确性
- [x] 实现数据清洗和格式化
- [x] 解析并提取74个批次号（12个产品）
- [x] 保存为JSON和CSV格式
- [ ] 实现雀巢官网爬取
- [ ] 将数据写入飞书表格（需要权限）

### Abbott爬虫
- [ ] 创建AbbottRecallScraper类
- [ ] 实现similacrecall.com页面爬取
- [ ] 解析批次号规则（前两位22-37，包含K8/SH/Z2）
- [ ] 提取有效期信息
- [ ] 测试数据提取准确性
- [ ] 编写测试脚本
- [ ] 运行测试并验证数据

### 数据写入飞书
- [x] 创建飞书API客户端类（FeishuClient）
- [x] 实现认证逻辑（获取access_token）
- [x] 实现数据写入接口
- [x] 实现数据查询接口
- [x] 测试飞书API连接
- [x] 测试列出表格
- [ ] 测试写入记录（权限不足，需要配置）
- [ ] 编写数据迁移脚本（爬虫数据 → 飞书表格）
- [ ] 手动触发爬虫，将数据写入飞书

### 数据验证
- [ ] 验证雀巢数据完整性
- [ ] 验证Abbott数据完整性
- [ ] 检查批次号格式一致性
- [ ] 检查有效期格式
- [ ] 编写数据质量报告
- [ ] 修复数据问题

---

## Day 5-7：小程序核心功能

### 小程序初始化
- [ ] 下载微信开发者工具
- [ ] 创建小程序项目
- [ ] 配置app.json
- [ ] 创建页面目录结构
  - [ ] pages/index（主页）
  - [ ] pages/scan（扫描/输入）
  - [ ] pages/result（结果页）
  - [ ] pages/history（历史记录）
  - [ ] pages/about（关于）
- [ ] 创建工具类目录（utils）

### UI原型设计（Figma）
- [ ] 设计主页原型（扫描入口、品牌选择）
- [ ] 设计扫描页面原型（拍照、输入框）
- [ ] 设计结果页面原型（召回/未召回/未找到）
- [ ] 设计历史记录页面原型
- [ ] 设计关于页面原型（免责声明）
- [ ] 导出设计规范（颜色、字体、间距）
- [ ] 导出切图资源

### 小程序UI开发
- [ ] 开发主页（index）
  - [ ] 品牌选择器
  - [ ] 扫描按钮
  - [ ] 手动输入入口
- [ ] 开发扫描页面（scan）
  - [ ] 拍照按钮
  - [ ] 批次号输入框
  - [ ] 批次号格式提示
- [ ] 开发结果页面（result）
  - [ ] 召回结果展示（危险状态）
  - [ ] 未召回展示（安全状态）
  - [ ] 未找到提示
  - [ ] 官方来源链接
- [ ] 开发历史记录页面（history）
  - [ ] 查询列表
  - [ ] 删除功能
- [ ] 开发关于页面（about）
  - [ ] 产品说明
  - [ ] 免责声明
  - [ ] 联系方式

### OCR集成
- [ ] 注册百度OCR账号
- [ ] 获取API Key和Secret Key
- [ ] 测试OCR API调用
- [ ] 封装OCR工具类
- [ ] 集成到小程序（使用云开发或服务端代理）
- [ ] 测试不同批次号照片识别
- [ ] 优化识别准确率
- [ ] 添加识别失败时的手动输入引导

### 飞书API集成
- [ ] 在小程序端实现飞书API调用
  - [ ] 需要创建云函数或后端服务
  - [ ] 避免在小程序端直接使用Secret Key
- [ ] 实现批次号查询接口
  - [ ] 支持精确匹配
  - [ ] 支持模糊匹配（部分批次号）
- [ ] 实现查询结果返回
- [ ] 测试查询功能

### 小程序功能联调
- [ ] OCR识别 → 飞书查询 → 结果展示 完整流程测试
- [ ] 手动输入 → 飞书查询 → 结果展示 完整流程测试
- [ ] 测试不同品牌、不同批次号
- [ ] 测试边界情况（空输入、错误格式、未找到）
- [ ] 优化错误提示
- [ ] 本地调试和测试

---

# Week 2：数据采集 + 功能完善

## Day 8-10：数据采集（Top 5品牌）

### Mead Johnson爬虫
- [ ] 创建MeadJohnsonRecallScraper类
- [ ] 研究FDA召回页面结构
- [ ] 实现FDA页面爬取
- [ ] 提取Nutramigen批次号
- [ ] 提取Enfamil召回信息（如果有）
- [ ] 数据清洗和格式化
- [ ] 测试并验证数据

### Danone爬虫
- [ ] 创建DanoneRecallScraper类
- [ ] 研究欧洲监管机构召回页面
- [ ] 实现页面爬取
- [ ] 提取Aptamil、Cow & Gate批次号
- [ ] 数据清洗和格式化
- [ ] 测试并验证数据

### FrieslandCampina爬虫
- [ ] 创建FrieslandCampinaRecallScraper类
- [ ] 研究亚洲监管机构召回页面
- [ ] 实现页面爬取
- [ ] 提取Friso批次号
- [ ] 数据清洗和格式化
- [ ] 测试并验证数据

### 数据整合
- [ ] 运行所有爬虫
- [ ] 汇总所有召回数据
- [ ] 去重（同一批次号可能出现在多个数据源）
- [ ] 数据质量检查
  - [ ] 检查批次号格式
  - [ ] 检查品牌字段
  - [ ] 检查产品名称
  - [ ] 检查有效期格式
- [ ] 修复数据问题
- [ ] 批量写入飞书表格
- [ ] 生成数据质量报告

### 批次号匹配算法优化
- [ ] 实现精确匹配（批次号完全相同）
- [ ] 实现模糊匹配（部分匹配）
  - [ ] 支持前缀匹配（如用户输入514507）
  - [ ] 支持忽略大小写
  - [ ] 支持忽略空格和特殊字符
- [ ] 实现品牌优先级（先搜索用户选择的品牌）
- [ ] 添加匹配分数（相似度计算）
- [ ] 编写单元测试
- [ ] 性能优化

---

## Day 11-12：小程序功能完善

### 历史查询记录
- [ ] 实现本地存储（wx.setStorage）
- [ ] 保存每次查询记录
  - [ ] 查询内容
  - [ ] 查询方式（OCR/手动）
  - [ ] 查询结果
  - [ ] 查询时间
- [ ] 实现历史记录列表展示
- [ ] 实现历史记录删除
- [ ] 实现清空所有记录
- [ ] 优化存储效率（限制最多保存100条）

### OCR准确率优化
- [ ] 收集不同品牌罐子的照片
- [ ] 测试OCR识别
- [ ] 分析失败案例
- [ ] 优化图片预处理
  - [ ] 调整对比度
  - [ ] 去噪
  - [ ] 裁剪
- [ ] 调整OCR参数
- [ ] 添加多次尝试机制
- [ ] 测试识别率提升

### 批次号格式提示
- [ ] 为每个品牌创建批次号格式示例
  - [ ] 雀巢：8-10位数字字母，如51450742F1
  - [ ] Abbott：前两位22-37，包含K8/SH/Z2
  - [ ] Mead Johnson：待确认
  - [ ] Danone：待确认
  - [ ] FrieslandCampina：待确认
- [ ] 在输入框下方显示当前选择的品牌格式提示
- [ ] 添加格式校验
- [ ] 格式错误时给出具体提示

### 错误提示和引导
- [ ] 优化网络错误提示
- [ ] 优化OCR识别失败提示
- [ ] 优化未找到批次号提示
- [ ] 添加帮助提示图标
- [ ] 添加引导流程（第一次使用）
- [ ] 优化加载状态提示

### 性能优化
- [ ] 减少API调用次数
- [ ] 实现查询结果缓存
- [ ] 优化图片上传大小
- [ ] 优化页面加载速度
- [ ] 减少不必要的重渲染

---

## Day 13-14：测试与修复

### 内部测试准备
- [ ] 准备测试用例
  - [ ] 正常流程（召回批次号）
  - [ ] 正常流程（未召回批次号）
  - [ ] 边界情况（空输入）
  - [ ] 边界情况（错误格式）
  - [ ] 边界情况（网络错误）
  - [ ] OCR测试（不同品牌、不同光照）
- [ ] 准备测试设备（iPhone、Android）
- [ ] 准备测试数据（真实召回批次号、非召回批次号）

### 用户测试
- [ ] 招募5-10个测试用户
  - [ ] 目标用户：宝妈、奶爸
- [ ] 发放测试小程序
- [ ] 收集使用反馈
  - [ ] 功能问题
  - [ ] 体验问题
  - [ ] 建议和需求
- [ ] 记录Bug列表

### Bug修复
- [ ] 优先级P0：崩溃、数据错误 → 立即修复
- [ ] 优先级P1：核心功能失效 → 立即修复
- [ ] 优先级P2：体验问题 → 本周修复
- [ ] 优先级P3：优化建议 → 延后到v1.1
- [ ] 重新测试修复后的功能

### UX优化
- [ ] 根据用户反馈优化界面
- [ ] 优化文案（更易懂）
- [ ] 优化交互流程（更流畅）
- [ ] 优化颜色和视觉（更友好）
- [ ] 优化字体大小（更易读）

### 测试报告
- [ ] 编写测试报告
  - [ ] 测试覆盖情况
  - [ ] Bug清单
  - [ ] 修复情况
  - [ ] 未修复问题及原因
- [ ] 评估上线风险

---

# Week 3：审核准备 + 上线

## Day 15-16：小程序审核准备

### 小程序资质准备
- [ ] 准备营业执照/个体户证明
- [ ] 准备开发者身份信息
- [ ] 准备食品相关资质（如需要）

### 应用资料准备
- [ ] 小程序名称（建议：召回查询助手）
- [ ] 小程序简介（150字以内）
- [ ] 小程序图标（1024x1024）
- [ ] 应用截图（至少5张）
  - [ ] 主页截图
  - [ ] 扫描页面截图
  - [ ] 召回结果截图
  - [ ] 未召回结果截图
  - [ ] 历史记录截图
- [ ] 类目选择（工具类/教育类）
- [ ] 服务类目选择

### 法务资料
- [ ] 编写隐私政策
  - [ ] 数据收集说明
  - [ ] 数据使用说明
  - [ ] 用户权利说明
- [ ] 编写用户协议
  - [ ] 使用规则
  - [ ] 免责声明（重要！）
  - [ ] 知识产权说明
- [ ] 创建隐私政策页面（小程序内）
- [ ] 创建用户协议页面（小程序内）

### 审核自查
- [ ] 检查是否有隐藏功能
- [ ] 检查是否有诱导分享
- [ ] 检查是否有违规内容
- [ ] 检查是否有误导性宣传
- [ ] 检查是否有未经授权的第三方SDK
- [ ] 检查是否符合微信小程序规范
- [ ] 准备审核说明（如果功能特殊）

### 提交审核
- [ ] 填写小程序信息
- [ ] 上传图标和截图
- [ ] 填写服务类目
- [ ] 上传资质文件
- [ ] 填写隐私政策链接
- [ ] 提交审核
- [ ] 等待审核结果

---

## Day 17-18：等待审核 + 营销准备

### 营销文案
- [ ] 编写产品介绍文案（200字）
- [ ] 编写问题解决文案（针对用户痛点）
- [ ] 编写使用教程文案
- [ ] 编写小红书发帖文案
- [ ] 编写朋友圈分享文案
- [ ] 编写抖音短视频脚本

### 营销素材
- [ ] 设计产品宣传图（小红书风格）
- [ ] 设计功能演示图（GIF）
- [ ] 录制产品介绍视频（30秒）
- [ ] 录制使用教程视频（1分钟）
- [ ] 制作Logo和品牌素材

### 内容营销
- [ ] 小红书发布"奶粉召回查询工具"帖子
- [ ] 小红书发布"能恩全护召回查询"帖子
- [ ] 抖音发布短视频
- [ ] 准备知乎回答素材
- [ ] 准备微信公众号素材

### 数据监控准备
- [ ] 配置飞书数据统计（查询次数）
- [ ] 配置小程序数据统计（微信官方）
- [ ] 创建数据监控看板（飞书多维表格）
- [ ] 准备数据报告模板

---

## Day 19-21：上线 + 迭代

### 审核通过
- [ ] 审核通过后，检查小程序状态
- [ ] 测试线上版本功能
- [ ] 检查数据准确性
- [ ] 准备正式上线公告

### 正式上线
- [ ] 发布正式公告（朋友圈、小红书）
- [ ] 在相关社群分享（宝妈群）
- [ ] 联系意见领袖试用
- [ ] 监控上线后数据和错误

### 数据监控
- [ ] 监控用户注册/使用数据
- [ ] 监控查询次数
- [ ] 监控OCR识别率
- [ ] 监控错误日志
- [ ] 收集用户反馈
- [ ] 生成首日数据报告

### Bug修复
- [ ] 快速修复上线后发现的Bug
- [ ] 发布小程序更新版本
- [ ] 通知用户更新

### v1.1迭代准备
- [ ] 收集用户反馈
- [ ] 分析数据报告
- [ ] 规划v1.1功能
  - [ ] 批量扫描
  - [ ] 订阅提醒
  - [ ] 更多品牌
  - [ ] 更多品类
- [ ] 编写v1.1需求文档
- [ ] 制定v1.1开发计划

---

# 🎯 里程碑检查点

## 里程碑1：MVP可用（Week 1结束）
- [x] 雀巢数据已采集（74个批次号，12个产品）
- [x] 数据已保存为JSON和CSV
- [ ] 数据写入飞书表格（需要配置权限）
- [ ] Abbott数据已采集
- [ ] 小程序核心功能可用（OCR识别 + 批次号查询 + 结果展示）
- [ ] 本地测试通过

## 里程碑2：功能完善（Week 2结束）
- [ ] Top 5品牌数据已采集
- [ ] 历史查询记录功能完成
- [ ] 内部测试完成
- [ ] 关键Bug已修复

## 里程碑3：正式上线（Week 3结束）
- [ ] 小程序审核通过
- [ ] 营销素材准备完成
- [ ] 正式上线
- [ ] 首批用户使用

---

# 📊 进度统计

## Week 1 进度
- 总任务：40
- 已完成：15
- 进行中：0
- 阻塞：1（飞书表格权限）
- 未完成：24
- 完成率：38%

## Week 2 进度
- 总任务：35
- 已完成：0
- 进行中：0
- 未完成：35
- 完成率：0%

## Week 3 进度
- 总任务：30
- 已完成：0
- 进行中：0
- 未完成：30
- 完成率：0%

## 总体进度
- 总任务：105
- 已完成：15
- 进行中：0
- 阻塞：1
- 未完成：89
- 总完成率：14%

---

# ⚠️ 风险跟踪

## 风险1：飞书API权限不足
- 风险等级：🟡 中
- 影响范围：数据存储
- 应对措施：
  - [x] 在飞书开放平台配置权限
  - [x] 需要发布应用才能生效
  - [ ] 手动创建表格字段
  - [ ] 导入CSV数据到飞书
- 当前状态：⏸️ 阻塞中（需要手动操作或等待权限生效）

## 风险2：OCR识别准确率低
- 风险等级：🟡 中
- 影响范围：核心功能
- 应对措施：
  - [ ] 测试多种OCR服务（百度/腾讯/Google）
  - [ ] OCR失败时立即引导手动输入
  - [ ] 提供批次号格式示例和说明
- 当前状态：未开始

## 风险3：爬虫被封IP
- 风险等级：🟡 中
- 影响范围：数据采集
- 应对措施：
  - [ ] 使用代理IP池
  - [ ] 控制爬取频率
  - [ ] 请求头伪装
  - [ ] 混合人工整理数据
- 当前状态：未开始

## 风险4：小程序审核被拒
- 风险等级：🟡 中
- 影响范围：上线
- 应对措施：
  - [ ] 严格遵循审核规范
  - [ ] 提前准备多个审核版本
  - [ ] 咨询微信客服（如需要）
- 当前状态：未开始

## 风险5：数据准确性问题
- 风险等级：🟡 中
- 影响范围：核心价值
- 应对措施：
  - [ ] 多数据源交叉验证
  - [ ] 明确免责声明
  - [ ] 用户纠错机制
  - [ ] 定期人工审核数据
- 当前状态：数据已采集，待验证

---

# 📝 备注

- 任务清单会持续更新
- 每次完成一个任务立即打钩
- 遇到阻塞及时沟通
- 保持迭代节奏，不要卡在一个任务上
- Day 1已部分完成：雀巢数据采集完成（74个批次号）

**最后更新**：2026-01-29 19:17
**负责人**：产品+设计+开发（全权负责）
